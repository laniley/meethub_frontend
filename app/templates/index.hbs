{{!-- TITLE --}}
<h1>{{t "messages.title"}}</h1>
{{!-- FILTERS --}}
<div class="filter-container">
  {{#link-to 'index.events'}}
    <div class="summary-item {{hasUnreadEventInvitations:highlight}}" title={{t "welcome.event-invitations"}}>
      <div class="section-icon {{hasUnreadEventInvitations:has-unread-messages}}">
        {{fa-icon "calendar"}}
      </div>
      <div class="type">{{fa-icon "plus"}}</div>
      <div class="number">{{number_of_new_event_invitations}}</div>
    </div>
  {{/link-to}}
  {{#link-to 'friends' (query-params show_new=true)}}
    <div class="summary-item {{hasUnseenNewFriendships:highlight}}" title={{t "friend.new"}}>
      <div class="section-icon {{hasUnseenNewFriendships:has-unread-messages}}">
        {{fa-icon "group"}}
      </div>
      <div class="type">{{fa-icon "plus"}}</div>
      <div class="number">{{number_of_unseen_new_friendships}}</div>
    </div>
  {{/link-to}}
</div>

{{#if model.isSyncingWithFB}}
  <div class="greeting">
    <div class="fb-sync-icon is-syncing">
      <span class="fa-stack fa-2x">
        {{fa-icon "refresh" spin=true stack=2 size=3}}
        {{fa-icon "facebook-square" stack=1}}
      </span>
    </div>
    <div class="fb-sync-text"><h3>Syncing your friends and events with facebook.<br />Please wait...</h3></div>
  </div>
{{else}}
  <div class="main-area-list">
    {{#each sorted_messages as |message|}}
      <div class="item" {{action 'toggleMessage' message}}>
        <div class="icon">
          {{#if (eq message.message_type 'event')}}
            {{fa-icon "calendar"}}
          {{else}}
            {{#if (eq message.message_type 'friend')}}
              {{fa-icon "group"}}
            {{else}}
              {{fa-icon "envelope"}}
            {{/if}}
          {{/if}}
        </div>
        {{!-- <div class="date_of_creation">{{message.reference_object.created_at}}</div> --}}
        <div class="subject">{{message.subject}}</div>
        <div class="new">
          {{#unless message.has_been_read}}
            {{t "new"}}
          {{/unless}}
        </div>
      </div>
    {{/each}}
  </div>
{{/if}}
